# Garamon Java Bindings Generator

This project generates Java bindings for Geometric Algebra libraries produced by [Garamon](https://github.com/vincentnozick/garamon). It creates a new Java project skeleton from templates, allowing easy access and use of the `org.garamon.<algebra>.Mvec` java package within any Java IDE.

## Prerequisites

### 1. Garamon Library

You need a Geometric Algebra library generated by Garamon. For now, you can use a specific fork and branch:

```bash
git clone https://github.com/oarcher/garamon.git
cd garamon
git checkout binding_gen
# Follow Garamon's build instructions to generate your library
```

### 2. jextract Tool

The `jextract` tool is required to generate the Java bindings. It is part of Project Panama and requires **JDK 25** or later.

You can download `jextract` from [https://jdk.java.net/jextract/](https://jdk.java.net/jextract/).

## Usage

To generate the Java bindings, use the `create_package` (or `create_package.bat` for windows) script:

```bash
./create_package --lib=<path_to_native_library> --mvec_h=<path_to_mvec_header> [--jextract=<path_to_jextract_tool>] [--out=<output_directory>] [--publish]
```

### Arguments:

*   `--lib=<path>`: Path to the native library (e.g., `../garamon/build/output/garamon_c5ga/libc5ga.so`, `../garamon/build/output/garamon_c5ga/c5ga.dll`).
*   `--mvec_h=<path>`: Path to the C header file (e.g., `../garamon/build/output/garamon_c5ga/src/c5ga/Mvec.h`) for `jextract`.
*   `--jextract=<path>`: Path to the `jextract` tool executable (optional). If not provided, `jextract` must be in your system's PATH.
*   `--out=<path>`: Directory where the skeleton project will be copied (optional). The main algebra project is always generated in `build-algebra`.

## Example

Assuming you have built Garamon in `../garamon` and `jextract` is installed at `/usr/share/jextract-22/bin/jextract`. The main algebra project will be generated in `build-algebra`, and the examples project will be copied to `my_algebra_project`:

### Linux
```bash
./create_package
    --lib=../garamon/build/output/garamon_c5ga/libc5ga.so
    --mvec_h=../garamon/build/output/garamon_c5ga/src/c5ga/Mvec.h
    --jextract=/usr/share/jextract-22/bin/jextract \
    --out=my_algebra_project \
    --publish
```

### Windows (PowerShell):
```bash
.\create_package.bat
    --lib=..\garamon\build\output\garamon_c5ga\build\Release\c5ga.dll
    --mvec_h=..\garamon\build\output\garamon_c5ga\src\c5ga\Mvec.h
    --jextract=..\..\Tools\jextract-22\bin\jextract.bat
    --out=../garamon-java-c5ga
```

## IDE Setup

The generated project is a standard Gradle project and can be easily opened in popular Java IDEs like IntelliJ IDEA and VSCode. This project serves as a development skeleton, with `src/main/java/Main.java` providing an executable example.
